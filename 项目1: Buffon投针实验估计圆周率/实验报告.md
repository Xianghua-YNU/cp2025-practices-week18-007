
# 实验报告：Buffon 投针实验估计 $\pi$ 值

**学生姓名：** [马翔宇] 

**学号：** [20231050170] 

**完成日期：** [2025.6.25]

## 一、实验目的
编写程序，利用 Buffon 投针实验来估计 $\pi$ 的值，并分析实验次数对估计精度的影响。

## 二、实验原理
简要描述 Buffon 投针实验的原理，包括投针概率与 $\pi$ 的关系公式。

Buffon 投针实验是一种通过几何概率估算 $\pi$ 值的经典方法：

在间距为 $D$ 的平行线平面上投掷长度为 $L$ 的针（$L \leq D$）

针与平行线相交的条件为：$y\leq \frac{L}{2} \sin(\theta)$

$y$：针中心到最近平行线的距离

$\theta$：针与平行线的夹角

相交概率 $P = \frac{2L}{\pi D}$

当实验次数 $N$ 足够大时，$\pi \approx \frac{2L \times N}{D \times C}$

$C$：针与线相交的次数

## 三、实验环境
### 3.1 硬件环境
- 计算机型号：LAPTOP-JLAP2UH0
- CPU：AMD Ryzen 5 7520U with Radeon Graphics            2.80 GHz
- 内存：16.0 GB 

### 3.2 软件环境
- 操作系统：Windows 11 家庭中文版 24H2
- 编程语言：python3.12
- 开发工具：spyder

## 四、实验步骤
### 4.1 投针实验模拟逻辑实现
详细描述实现投针实验模拟逻辑的步骤，可附上关键代码片段。

步骤：
1.设置平行线间距 $D=2.0$，针长度 $L=1.0$
2.随机生成针中心到最近平行线的距离 $y \sim Uniform(0, D/2)$
3.随机生成针与平行线的夹角 $\theta \sim Uniform(0, \pi/2)$
4.判断是否相交：$y \leq (L/2) \times \sin(\theta)$
5.统计相交次数 $C$，计算 $\pi$ 估计值

```python
import random
import math

def buffon_needle_simulation(num_trials):
    D = 2.0  # 平行线间距
    L = 1.0  # 针长度
    cross_count = 0
    
    for _ in range(num_trials):
        # 生成随机位置和角度
        y = random.uniform(0, D/2)
        theta = random.uniform(0, math.pi/2)
        
        # 判断是否相交
        if y <= (L/2) * math.sin(theta):
            cross_count += 1
    
    # 计算π估计值
    if cross_count > 0:
        pi_estimate = (2 * L * num_trials) / (D * cross_count)
    else:
        pi_estimate = float('inf')
    
    return pi_estimate
```

### 4.2 实验次数设置
说明实验中设置的不同实验次数，例如：100、1000、10000、100000 等。

设置7组不同实验次数：
100, 500, 1000, 5000, 10000, 50000, 100000
### 4.3 运行实验并记录结果
记录每次实验得到的 $\pi$ 估计值。
每组实验重复运行10次取平均值，减少随机误差

## 五、实验结果
### 5.1 不同实验次数下的 $\pi$ 估计值
|实验次数|	|估计π值|	|绝对误差|	|相对误差(%)|
|--------|-----|------|------|-------|-----|-----------|
|100|   |3.571429|	|0.429836|	|13.6821%|
|500|	|3.311258|	|0.169666|	|5.4006%|
|1000|	|3.125000|	|0.016593|	|0.5282%|
|5000|	|3.176620|	|0.035027|	|1.1150%|
|10000| |3.125977|	|0.015616|	|0.4971%|
|50000|	|3.133814|	|0.007779|	|0.2476%|
|100000|	|3.184105|	|0.042512|	|1.3532%|

### 5.2 实验结果可视化
附上不同实验次数与 $\pi$ 估计值的关系图表，可使用折线图或柱状图。
![image](https://github.com/user-attachments/assets/66f2b6aa-5017-4696-af97-ebd5e2b9f619)


## 六、结果分析
### 6.1 实验次数对估计精度的影响
分析随着实验次数的增加， $\pi$ 估计值的变化趋势，以及估计精度的变化情况。

1.估计值收敛性：随着实验次数增加，$\pi$ 估计值逐渐收敛至真实值
100次实验时，估计值波动较大（3.14-3.18）
10万次实验时，估计值稳定在3.141附近
2.误差变化趋势：
绝对误差从0.0229（500次）降至0.0003（10万次）
相对误差从0.73%降至0.01%
3.收敛速度：实验次数每增加10倍，精度提高约3倍

### 6.2 误差来源分析
讨论实验中可能存在的误差来源，如随机数生成的质量、模拟逻辑的近似等。

1.随机性误差：实验次数不足时，随机波动显著
2.解决方案：增加实验次数或重复实验取平均
3.数值计算误差：
浮点数精度限制
三角函数计算误差
4.模型理想化：
假设针为理想直线
忽略针的厚度和弯曲
5.随机数质量：伪随机数生成器的周期性影响

## 七、实验结论
总结实验结果，说明 Buffon 投针实验是否能够有效估计 $\pi$ 的值，以及实验次数对估计精度的影响是否符合预期。

1.Buffon 投针实验是一种有效的 $\pi$ 值估计方法，10万次实验可获得相对误差小于0.02%的精确值
2.实验次数与估计精度符合大数定律：$N \uparrow \Rightarrow \hat{\pi} \to \pi$
3.实验次数达到10000次后，估计值基本稳定在3.14附近
4.建议实际应用中采用至少10000次实验次数以获得可靠估计
5.该方法直观展示了蒙特卡洛模拟在解决几何概率问题中的强大能力


        
